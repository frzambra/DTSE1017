arrange(date) |>
select(orchard:counterType) |>
distinct()
data |>
arrange(date) |>
select(orchard:counterType) |>
distinct()
data |>
arrange(date) |>
select(orchard:counterType)
data |>
arrange(date) |>
select(orchard:counterType)
data
data |>
arrange(date)
data |>
arrange(date) |> print(n=20)
data |>
arrange(date) |> print(n=50)
data |>
arrange(date) |>
select(orchard:counterType) |>
distinct()
data |>
arrange(date) |>
select(orchard:counterType) |>
distinct() |> print(n=30)
data
?distinct
data |>
arrange(date) |>
select(orchard:counterType) |>
distinct(.keep_all = TRUE) |> print(n=30)
data |>
arrange(date) |>
select(orchard:counterType) |>
distinct(.keep_all = TRUE) |> print(n=30)
data |>
arrange(date) |>
#select(orchard:counterType) |>
distinct(across(2:8)) |> print(n=30)
data |>
arrange(date) |>
#select(orchard:counterType) |>
distinct(across(2:8),.keep_all = TRUE)
data |>
arrange(date) |>
#select(orchard:counterType) |>
distinct(across(2:8),.keep_all = TRUE) |> print(n=50)
data
data |>
arrange(date) |>
distinct(across(2:8),.keep_all = TRUE) |> print(n=50)
6.7+6.7+6.9
20.3/3
7+7+6.7
(7+7+6.7)/3
iris
iris |>
walk2(.y= unique(Species),
.f = \(x){
x |>
filter(Species = .y) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
library(ggplot2)
library(purrr)
iris |>
walk2(.y= unique(Species),
.f = \(x){
x |>
filter(Species = .y) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
iris |>
walk2(.y= unique(iris$Species),
.f = \(x){
x |>
filter(Species = .y) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
iris
iris |>
walk2(.y= unique(iris$Species),
.f = \(x){
x |>
filter(Species = .y) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
iris |>
map2(.y= unique(iris$Species),
.f = \(x){
x |>
filter(Species = .y) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
iris |>
map(.f = \(x){
especie <- unique(x$Species)
x |>
filter(Species == especie) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
iris |>
map(.f = \(x){
especie <- unique(Species)
x |>
filter(Species == especie) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
iris |> map(.f=Species)
iris |> map(.f=\(x) filter(x,Species == 'versicolor'))
names(iris)
iris |> map(.f=\(x) filter(x,Species == 'versicolor'))
iris |> map()
iris |> map(.x,.x)
iris |> map(.x,~.x)
iris |> map(.x,print(.x))
iris |> map(print(.x))
?map
iris |> map(.f = print(.x))
iris |> map(.f = \(x) print(x))
iris |> map(.f = ~print(.x))
especie <- iris |> distinct(Species)
library(dplyr)
especie <- iris |> distinct(Species)
especie
especie <- iris |> distinct(Species) |> pull(Species)
especie
especies |>
map(.f = \(x){
iris |>
filter(Species == x) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
especie |>
map(.f = \(x){
iris |>
filter(Species == x) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
especie |>
walk(.f = \(x){
iris |>
filter(Species == x) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
especie |>
walk(.f = \(x){
iris |>
filter(Species == x) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
plots <- especie |>
walk(.f = \(x){
iris |>
filter(Species == x) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
plots
especie |>
walk(.f = \(x){
iris |>
filter(Species == x) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
}) |>
nchar()
especie |>
walk(.f = \(x){
iris |>
filter(Species == x) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
especie |>
walk(.f = \(x){
iris |>
filter(Species == x) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})->a
a
nchar(a)
plots <- especie |>
walk(.f = \(x){
iris |>
filter(Species == x) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
}) |>
as.character() |>
nchar()
plots
plots <- especie |>
walk(.f = \(x){
iris |>
filter(Species == x) |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
ggsave(paste0(x,'.png'))
}) |>
as.character() |>
nchar()
iris |>
group_by(species) |>
group_split
iris |>
group_by(species) |>
group_split()
iris |>
group_by(Species) |>
group_split()
iris_split <- iris |>
group_by() |>
group_split()
iris_split
iris_split |>
walk(.f = \(x){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
ggsave(paste0(x,'.png'))
})
iris_split |>
map(.f = \(x){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
ggsave(paste0(x,'.png'))
})
iris_split
iris_split[[1]]
iris_split |>
map(.f = \(x){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
iris_split |>
map(.f = \(x){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
iris_split |>
map(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
iris_split
length(iris_split)
iris_split <- iris |>
group_by(Species) |>
group_split()
iris_split
iris_split |>
map(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point()
})
iris_split |>
map(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm')
})
iris_split |>
map(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
})
iris |>
group_by(Species) |>
nest()
library(tidyr)
iris |>
group_by(Species) |>
nest()
iris_nest <- iris |>
group_by(Species) |>
nest()
iris_nest <- iris |>
group_by(Species) |>
nest()
iris_nest$data |>
map(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
})
iris_split |>
walk(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
})
iris_split |>
walk(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
}) |>
mutate(new_var = Sepal.Length / Petal.Length)
iris_split |>
walk(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
})
iris_split |>
walk(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
}) -> a
class(a)
a
iris_nest$data |>
walk(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
}) |>
mutate(new_var = Sepal.Length / Petal.Length)
iris_nest$data |>
walk(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
})
iris_nest$data |>
walk(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
}) -> a
class(a)
a
iris_nest$data |>
walk(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
}) |>
map(mutate(new_var = Sepal.Length / Petal.Length))
iris_nest$data |>
walk(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
}) |>
map(\(x) mutate(x,new_var = Sepal.Length / Petal.Length))
iris_nest$data |>
map(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
}) |>
map(\(x) mutate(x,new_var = Sepal.Length / Petal.Length))
iris_split |>
walk(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
}) |>
map(\(x) mutate(x,new_var = Sepal.Length / Petal.Length))
iris_split |>
walk(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
})
iris_split |>
walk(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
})
iris_split |>
walk(.f = \(x){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
#ggsave()
})
iris_split[[1]]
iris_split[[1]] |> names()
iris_split |> names()
iris_split[[1]] |> names()
str(iris_split)
iris_split |>
walk(.f = \(x){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
ggsave(paste0(unique(x$Species),'.png'))
}) |>
map(\(x) mutate(x,new_var = Sepal.Length / Petal.Length))
iris_nest$data |>
map(.f = \(x,factor){
x |>
ggplot(aes(Sepal.Length,Sepal.Width)) +
geom_point() +
geom_smooth(method = 'lm') +
theme_bw()
}) |>
map(\(x) mutate(x,new_var = Sepal.Length / Petal.Length))
model <- lm(Sepal.Length~Petal.Length,iris)
summary(model)$coefficients
summary(model) -> r
r$residuals
r$cov.unscaled
r$call
r$terms
r$residuals
r$aliased
r$fstatistic
summary(model)$coefficients
iris_lm <- iris |>
group_by(Species) |>
nest() |>
mutate(lm = map(data,\(x) lm(Sepal.Length~., data = x)))
iris_lm
iris_lm |>
mutate(coefs = map(lm,\(x) {
summary(x)$coefficients
}))
iris_lm |>
mutate(coefs = map(lm,\(x) {
summary(x)$coefficients
}))
iris_lm |>
mutate(coefs = map(lm,\(x) {
summary(x)$coefficients
})) |> unnest(coefs)
?possibly
library(purrr)
?possibly
list("a", 10, 100) |>
map_dbl(safely(log,otherwise = NULL))
a <- list("a", 10, 100) |>
map_dbl(safely(log,otherwise = NULL))
a
a <- list("a", 10, 100) |>
map(safely(log,otherwise = NULL))
a
library(tidyr)
library(dplyr)
iris_nest <- iris |>
group_by(Species) |>
nest()
iris_nest
iris_nest$data
iris_nest$data |>
lapply(\(x) lm(Sepal.Length~Petal.Length, data = x))
iris_lm <- iris |>
group_by(Species) |>
nest() |>
mutate(lm =lapply(data,\(x) lm(Sepal.Length~Petal.Length, data = x)))
iris_lm
